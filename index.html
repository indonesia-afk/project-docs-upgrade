
  <!DOCTYPE html>
  <html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Taman Bacaan</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
    <style>
      :root{ --accent:#1a73e8; --bg:#f0f2f5; --card:#fff; --text:#111; --muted:#555; }
      body { font-family: Arial, sans-serif; margin:0; padding:0; background:var(--bg); color:var(--text); transition: background .25s, color .25s; }
      .container { max-width:1000px; margin:20px auto; padding:20px; }
      h1 { text-align:center; color:var(--accent); margin-bottom:16px; font-family:'Orbitron', sans-serif; text-transform:uppercase; font-size: 1.8rem; }
      #searchInput { width:100%; padding:10px; margin-bottom:18px; font-size:1em; border-radius:6px; border:1px solid #ccc; box-sizing:border-box; }
      .doc-list { display:flex; flex-wrap:wrap; gap:18px; justify-content:center; }
      .doc-card { background:var(--card); padding:18px; box-shadow:0 6px 16px rgba(0,0,0,0.08); border-radius:10px; width:260px; word-break:break-word; transition: transform .16s; display:flex; flex-direction:column; gap:8px; }
      .doc-card:hover { transform: translateY(-6px); }
      .doc-title { font-weight:700; color:var(--accent); text-decoration:none; font-size:1.02em; }
      .doc-meta { font-size:0.9em; color:var(--muted); }
      .badge-new { background:#ff5252; color:#fff; padding:3px 8px; border-radius:999px; font-size:0.75rem; font-weight:700; margin-left:8px; vertical-align:middle; }
      .btn { display:inline-block; padding:8px 12px; border-radius:8px; background:var(--accent); color:#fff; text-decoration:none; font-size:0.95em; cursor:pointer; border:none; }
      .btn.secondary { background:#e0e0e0; color:#111; }
      footer.site-footer { margin-top:28px; font-size:0.92em; color:var(--muted); text-align:center; padding-top:16px; border-top:1px solid #e6e6e6; }
      .theme-toggle { position: fixed; top: 14px; right:14px; width:36px; height:36px; border-radius:50%; background:#fff; box-shadow:0 6px 14px rgba(0,0,0,0.12); display:flex; align-items:center; justify-content:center; cursor:pointer; z-index:1100; }
      .theme-toggle svg { width:20px; height:20px; }
      .viewer-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.6); display:none; align-items:center; justify-content:center; z-index:1200; padding:20px; }
      .viewer-content { width:100%; max-width:1100px; height:80vh; background:#fff; border-radius:10px; overflow:hidden; position:relative; display:flex; flex-direction:column; }
      .viewer-header { display:flex; justify-content:space-between; align-items:center; padding:10px 12px; background:#fafafa; border-bottom:1px solid #eee; gap: 8px; }
      .viewer-title { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
      .viewer-controls { display: flex; gap: 8px; }
      .viewer-iframe { flex:1; border:0; width:100%; height:100%; }
      .viewer-close { background:transparent; border:0; font-size:1.4em; cursor:pointer; padding: 0 5px; }
      body.dark { background:#111; color:#eee; }
      body.dark .doc-card { background:#1a1a1a; box-shadow:0 4px 10px rgba(0,0,0,0.6); }
      body.dark .theme-toggle { background:#222; }
      body.dark .viewer-content { background:#111; color:#eee; }
      body.dark .viewer-header { background:#0f0f0f; border-bottom-color:#222; }
      @media (max-width:640px){
        .doc-card { width:100%; }
        .viewer-content { height:86vh; max-width:100%; border-radius:8px; }
      }
    </style>
  </head>
  <body>
    <div class="theme-toggle" onclick="toggleTheme()" title="Toggle tema">
      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a9.93 9.93 0 0 0-7.07 2.93A10 10 0 1 0 12 2z"/></svg>
    </div>

    <div class="container">
      <h1>Taman Bacaan</h1>
      <input id="searchInput" placeholder="Cari judul atau isi dokumen..." />
      <div class="doc-list" id="docList"></div>
      <footer class="site-footer" id="siteFooter">
        ðŸ“Œ Terakhir sinkron: ${now}<br>
        ðŸ“‚ Jumlah file dalam folder: ${files.length}
      </footer>
    </div>

    <div id="viewerOverlay" class="viewer-overlay" onclick="overlayClick(event)">
      <div id="viewerContent" class="viewer-content" role="dialog" aria-modal="true" onclick="event.stopPropagation()">
        <div class="viewer-header">
          <div id="viewerTitle" class="viewer-title">Preview</div>
          <div class="viewer-controls">
            <button class="btn secondary" onclick="toggleFullScreen()">Fullscreen</button>
            <button class="btn secondary" id="openNewTab">Buka Tab Baru</button>
            <button class="viewer-close" onclick="closeViewer()" title="Tutup">âœ•</button>
          </div>
        </div>
        <iframe id="viewerIframe" class="viewer-iframe" src=""></iframe>
      </div>
    </div>

    <script>
      const docs = ${JSON.stringify(docData)};
      const docListEl = document.getElementById('docList');
      const searchInput = document.getElementById('searchInput');
      const viewerOverlay = document.getElementById('viewerOverlay');
      const viewerIframe = document.getElementById('viewerIframe');
      const viewerTitle = document.getElementById('viewerTitle');
      const openNewTabBtn = document.getElementById('openNewTab');
      const viewerContent = document.getElementById('viewerContent'); // <-- Elemen baru

      function renderDocs(filter='') {
        docListEl.innerHTML = '';
        const q = (filter || '').toLowerCase();
        docs.forEach(d => {
          if (!q || d.title.toLowerCase().includes(q)) {
            const card = document.createElement('div');
            card.className = 'doc-card';
            const badge = d.isNew ? '<span class="badge-new">NEW</span>' : '';
            card.innerHTML = `
              <div style="flex:1">
                <a class="doc-title" href="javascript:void(0)" onclick="openViewer('${d.preview}', '${escapeHtml(d.title)}')">${escapeHtml(d.title)}</a>
                <div class="doc-meta">updated: ${d.updated} ${badge}</div>
              </div>
              <div style="margin-top:8px">
                <button class="btn" onclick="openViewer('${d.preview}', '${escapeHtml(d.title)}')">Lihat</button>
                <a class="btn secondary" href="${d.preview}" target="_blank" rel="noopener">Buka Tab Baru</a>
              </div>
            `;
            docListEl.appendChild(card);
          }
        });
      }

      function escapeHtml(s){ return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }
      searchInput.addEventListener('input', e => renderDocs(e.target.value));
      renderDocs();

      function openViewer(url, title) {
        viewerTitle.innerText = title || 'Preview';
        viewerIframe.src = url;
        openNewTabBtn.onclick = function(){ window.open(url, '_blank'); };
        viewerOverlay.style.display = 'flex';
        document.body.style.overflow = 'hidden';
      }
      function closeViewer() {
        if (document.fullscreenElement) {
          document.exitFullscreen();
        }
        viewerOverlay.style.display = 'none';
        viewerIframe.src = '';
        document.body.style.overflow = '';
      }
      function overlayClick(e){ if(e.target === viewerOverlay) closeViewer(); }
      
      // <<< FUNGSI BARU UNTUK FULLSCREEN >>>
      function toggleFullScreen() {
        if (!document.fullscreenElement) {
          viewerContent.requestFullscreen().catch(err => {
            alert(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
          });
        } else {
          document.exitFullscreen();
        }
      }

      function toggleTheme(){ document.body.classList.toggle('dark'); }

      document.addEventListener('keydown', function(e){
        if(e.key === 'Escape' && viewerOverlay.style.display === 'flex') {
          closeViewer();
        }
      });
    </script>
  </body>
  </html>
  